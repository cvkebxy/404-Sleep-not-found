# üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

<div align="center">

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ**

[![PHP](https://img.shields.io/badge/PHP-8.1+-777BB4?logo=php&logoColor=white)](https://www.php.net/)
[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-F7DF1E?logo=javascript&logoColor=black)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-4479A1?logo=mysql&logoColor=white)](https://www.mysql.com/)
[![Nginx](https://img.shields.io/badge/nginx-1.18+-009639?logo=nginx&logoColor=white)](https://nginx.org/)

</div>

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ö—Ä–∞—Ç–∫–æ](#-–∫—Ä–∞—Ç–∫–æ)
- [–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Å–∏—Å—Ç–µ–º–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#-—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- [–í–µ–±-—Å–µ—Ä–≤–µ—Ä](#-–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#-–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#-—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –ö—Ä–∞—Ç–∫–æ

**–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å:**
- PHP 8.0+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8.1)
- –í–µ–±-—Å–µ—Ä–≤–µ—Ä: nginx + php-fpm –∏–ª–∏ Apache
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: MySQL 8.0+
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ email (PHPMailer)

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å:**
- Yandex.Maps JavaScript API v2.1
- PapaParse –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ CSV
- Vanilla JavaScript (ES6+)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π CSS –±–µ–∑ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞ frontend (–≥–æ—Ç–æ–≤—ã–µ JS/CSS)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –ü–æ–ª–Ω–∞—è UTF-8 –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ REST API –¥–ª—è AJAX-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

---

## üíª –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ |
|-----------|-----------|
| **–û–°** | Ubuntu 20.04+, Debian 11+, CentOS 8+ |
| **CPU** | 1 vCPU |
| **RAM** | 1-2 GB |
| **–î–∏—Å–∫** | 1 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ |
| **–°–µ—Ç—å** | –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è CDN-–±–∏–±–ª–∏–æ—Ç–µ–∫ |

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–ø—Ä–æ–¥–∞–∫—à–Ω)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ |
|-----------|-----------|
| **–û–°** | Ubuntu 22.04 LTS |
| **CPU** | 2+ vCPU |
| **RAM** | 4+ GB |
| **–î–∏—Å–∫** | 5+ GB (—Å –º–µ—Å—Ç–æ–º –¥–ª—è –ª–æ–≥–æ–≤ –∏ –±—ç–∫–∞–ø–æ–≤) |
| **SSL** | –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Let's Encrypt |

---

## üêò –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### PHP –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

**–í–µ—Ä—Å–∏—è PHP:** 8.0+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8.1)

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL
php8.1-mysqli

# JSON –æ–±—Ä–∞–±–æ—Ç–∫–∞
php8.1-json

# –ú–Ω–æ–≥–æ–±–∞–π—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ (UTF-8)
php8.1-mbstring

# SSL/TLS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
php8.1-openssl

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MIME —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
php8.1-fileinfo

# –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
php8.1-gd

# HTTP –∑–∞–ø—Ä–æ—Å—ã
php8.1-curl

# XML –ø–∞—Ä—Å–∏–Ω–≥
php8.1-xml
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

```bash
# –ê—Ä—Ö–∏–≤–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
php8.1-zip

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ GD)
php8.1-imagick
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Ubuntu 20.04/22.04

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
sudo apt install -y \
    php8.1-fpm \
    php8.1-mysqli \
    php8.1-curl \
    php8.1-mbstring \
    php8.1-xml \
    php8.1-gd \
    php8.1-zip \
    php8.1-fileinfo
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ CentOS/RHEL

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Remi
sudo yum install -y epel-release
sudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm

# –í–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è PHP 8.1
sudo dnf module reset php
sudo dnf module enable php:remi-8.1

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP
sudo yum install -y \
    php81-php-fpm \
    php81-php-mysqlnd \
    php81-php-json \
    php81-php-mbstring \
    php81-php-gd \
    php81-php-curl
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

```bash
php -m | grep -E 'mysqli|json|mbstring|openssl|gd|curl'
```

---

## üåê –í–µ–±-—Å–µ—Ä–≤–µ—Ä

### Nginx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
sudo apt install -y nginx
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/nginx/sites-available/rosatom-map`:

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/404-Sleep-not-found;
    index index.php index.html;

    # –õ–æ–≥–∏
    access_log /var/log/nginx/rosatom-map-access.log;
    error_log /var/log/nginx/rosatom-map-error.log;

    # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
    client_max_body_size 10M;

    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # PHP-FPM –æ–±—Ä–∞–±–æ—Ç–∫–∞
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
        
        # –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
        fastcgi_read_timeout 300;
        fastcgi_send_timeout 300;
    }

    # –ó–∞—â–∏—Ç–∞ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
    location ~ /\.(?!well-known) {
        deny all;
    }

    # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # –ó–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º
    location ~ /php/(config\.php|db\.php|functions\.php)$ {
        deny all;
    }
}
```

#### –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
sudo ln -s /etc/nginx/sites-available/rosatom-map /etc/nginx/sites-enabled/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx
sudo systemctl restart nginx
```

### Apache (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
sudo apt install -y apache2 libapache2-mod-php8.1
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .htaccess

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.htaccess` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```apache
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    
    # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>

# –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
<FilesMatch "^(config|db|functions)\.php$">
    Require all denied
</FilesMatch>

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ PHP
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_execution_time 300
```

#### –í–∫–ª—é—á–µ–Ω–∏–µ mod_rewrite

```bash
sudo a2enmod rewrite
sudo systemctl restart apache2
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### MySQL 8.0+

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# Ubuntu/Debian
sudo apt install -y mysql-server

# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
sudo mysql_secure_installation
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL
mysql -u root -p

-- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE rosatom_map 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE USER 'rosatom_user'@'localhost' 
IDENTIFIED BY 'secure_password_here';

-- –í—ã–¥–∞—á–∞ –ø—Ä–∞–≤
GRANT ALL PRIVILEGES ON rosatom_map.* 
TO 'rosatom_user'@'localhost';

-- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
FLUSH PRIVILEGES;

-- –í—ã—Ö–æ–¥
EXIT;
```

#### –ò–º–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

```bash
mysql -u rosatom_user -p rosatom_map < rosatom_map.sql
```

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/etc/mysql/mysql.conf.d/mysqld.cnf`:

```ini
[mysqld]
# InnoDB –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
innodb_buffer_pool_size = 1G
innodb_log_file_size = 256M
innodb_flush_log_at_trx_commit = 2

# –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
max_connections = 200

# –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞
max_allowed_packet = 64M
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ MySQL:

```bash
sudo systemctl restart mysql
```

---

## üìö –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### Yandex.Maps API

**–í–µ—Ä—Å–∏—è:** 2.1  
**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** –í `index.php` —á–µ—Ä–µ–∑ CDN

```html
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=–í–ê–®_API_–ö–õ–Æ–ß"></script>
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞:**
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ [–Ø–Ω–¥–µ–∫—Å.–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–µ](https://developer.tech.yandex.ru/)
2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è JavaScript API
3. –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ `index.php`

**–í–∞–∂–Ω–æ:** –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –Ø–Ω–¥–µ–∫—Å–∞.

### PapaParse

**–í–µ—Ä—Å–∏—è:** 5.4.1  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞—Ä—Å–∏–Ω–≥ CSV —Ñ–∞–π–ª–æ–≤  
**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** –ß–µ—Ä–µ–∑ CDN

```html
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
```

### PHPMailer

**–í–µ—Ä—Å–∏—è:** –í–∫–ª—é—á–µ–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç  
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `php/phpmailer/`  
**–§–∞–π–ª—ã:**
- `PHPMailer.php` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å
- `SMTP.php` - SMTP –ø—Ä–æ—Ç–æ–∫–æ–ª
- `Exception.php` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP:** –°–º. `php/register.php` –∏ `php/recover_password.php`

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—á—Ç—É –Ω–∞ —Å–≤–æ—é: –≤ —Ñ–∞–π–ª–µ `php/register.php` 161-167 —Å—Ç—Ä–æ–∫–∏ –∏ –≤ —Ñ–∞–π–ª–µ `php/recover_password.php` 116-122 —Å—Ç—Ä–æ–∫–∏ –∑–∞–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—É—é —á–∞—Å—Ç—å –Ω–∞ —Å–≤–æ—é —Ä–∞–±–æ—á—É—é –ø–æ—á—Ç—É. –ü–∞—Ä–æ–ª—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–µ —è–Ω–¥–µ–∫—Å –ø–æ—á—Ç—ã, –∫–æ–≥–¥–∞ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É –Ω–∞—Å—Ç—Ä–π–∫–∏ -> –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å -> –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π - > –ø–æ—á—Ç–∞

```
// –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–®–ò –ù–ê–°–¢–†–û–ô–ö–ò –ü–û–ß–¢–´
            $mail->Host       = 'smtp.yandex.com'; // SMTP —Å–µ—Ä–≤–µ—Ä
            $mail->Username   = 'rohanudzumaki@yandex.ru'; // –õ–æ–≥–∏–Ω –ø–æ—á—Ç—ã
            $mail->Password   = 'wjzuvxdrgxpoloda'; // –ü–∞—Ä–æ–ª—å –ø–æ—á—Ç—ã
            $mail->SMTPSecure = 'ssl';
            $mail->Port       = 465;
            $mail->setFrom('rohanudzumaki@yandex.ru', '–ö–ê–†–¢–ê –î–û–ë–†–´–• –î–ï–õ –†–û–°–ê–¢–û–ú–ê'); // –û—Ç –∫–æ–≥–æ
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PHP

–°–æ–∑–¥–∞–π—Ç–µ `php/config.php` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```php
<?php
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
define('DB_HOST', 'localhost');
define('DB_USER', 'rosatom_user');
define('DB_PASS', 'secure_password_here');
define('DB_NAME', 'rosatom_map');

// API –∫–ª—é—á–∏
define('YANDEX_API_KEY', '–≤–∞—à_–∫–ª—é—á_—è–Ω–¥–µ–∫—Å_–∫–∞—Ä—Ç');

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ email (PHPMailer)
define('SMTP_HOST', 'smtp.yandex.com');
define('SMTP_USER', 'your-email@yandex.ru');
define('SMTP_PASS', 'your-app-password');
define('SMTP_PORT', 465);
define('SMTP_SECURE', 'ssl');
define('EMAIL_FROM', 'your-email@yandex.ru');
define('EMAIL_FROM_NAME', '–ö–∞—Ä—Ç–∞ –¥–æ–±—Ä—ã—Ö –¥–µ–ª –†–æ—Å–∞—Ç–æ–º–∞');

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
define('SITE_URL', 'https://your-domain.com');
define('DEBUG_MODE', false); // true –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### 2. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
sudo chown -R www-data:www-data /var/www/404-Sleep-not-found

# –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –ª–æ–≥–æ—Ç–∏–ø–æ–≤
chmod -R 755 uploads/
chmod -R 755 uploads/logos/

# –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
chmod 600 php/config.php

# –ü—Ä–∞–≤–∞ –Ω–∞ –ª–æ–≥–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
chmod -R 755 logs/
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î

–ß—Ç–æ–±—ã —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–ª –Ω–µ —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ, –≤ —Ñ–∞–π–ª–µ `php/db.php` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å –ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞:

```php
$host = 'localhost';
$user = 'root';
$pass = 'strong_root_password_123';
$db_name = 'rosatom_map';
```
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ `php/db.php` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã (users, cards, nko_organizations, roles –∏ –¥—Ä.)
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç —Ä–æ–ª–∏ –∏ —Å–≤—è–∑–∏
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–í–∞–∂–Ω–æ:** –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞!

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –º–µ—Ä—ã

#### 1. HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
```

#### 2. –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –ò—Å–∫–ª—é—á–∏—Ç–µ –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
echo "php/config.php" >> .gitignore

# –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ nginx
location ~ /php/(config|db|functions)\.php$ {
    deny all;
}
```

#### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è email —á–µ—Ä–µ–∑ `filter_var()`
- ‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ `password_hash()`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME —Ç–∏–ø–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤

#### 4. CSRF –∑–∞—â–∏—Ç–∞

```php
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
$_SESSION['csrf_token'] = bin2hex(random_bytes(32));

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
if (!hash_equals($_SESSION['csrf_token'], $_POST['csrf_token'])) {
    die('CSRF token mismatch');
}
```

#### 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ Yandex API –∫–ª—é—á –ø–æ –¥–æ–º–µ–Ω–∞–º
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 6. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–±–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π

```php
// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
session_start();
$max_attempts = 5;
$lockout_time = 900; // 15 –º–∏–Ω—É—Ç
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ

#### ‚ùå –ö–∞—Ä—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –≤–º–µ—Å—Ç–æ –∫–∞—Ä—Ç—ã

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ HTTPS (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ø–Ω–¥–µ–∫—Å–æ–º)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–ª—é—á–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ JavaScript –æ—à–∏–±–∫–∏

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API
console.log(typeof ymaps); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 'object'
```

#### ‚ùå –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–æ—Ç–∏–ø—ã –ù–ö–û –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏—è:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
ls -la uploads/logos/

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤
chmod -R 755 uploads/
chown -R www-data:www-data uploads/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ PHP
php -i | grep upload_max_filesize
php -i | grep post_max_size
```

#### ‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞:** `Connection failed: Access denied`

**–†–µ—à–µ–Ω–∏—è:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã MySQL
sudo systemctl status mysql

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mysql -u rosatom_user -p

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
SHOW GRANTS FOR 'rosatom_user'@'localhost';

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ config.php
cat php/config.php | grep DB_
```

#### ‚ùå –û—à–∏–±–∫–∏ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–†–µ—à–µ–Ω–∏—è:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
SHOW INDEX FROM cards WHERE Key_name = 'header';

-- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
ALTER TABLE cards DROP INDEX header;
ALTER TABLE cards ADD FULLTEXT INDEX header (header, main_text, location, sub_text);

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã —Å–ª–æ–≤–∞
SHOW VARIABLES LIKE 'ft_min_word_len';
```

#### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤–º–µ—Å—Ç–æ —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

**–†–µ—à–µ–Ω–∏—è:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –ë–î
SHOW VARIABLES LIKE 'character_set%';

-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
ALTER DATABASE rosatom_map 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
ALTER TABLE cards 
CONVERT TO CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;
```

```php
// –í db.php –¥–æ–±–∞–≤—å—Ç–µ
$conn->set_charset("utf8mb4");
```

#### ‚ùå Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∏—Å—å–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–†–µ—à–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ SMTP:**

```php
// –í–∫–ª—é—á–∏—Ç–µ –æ—Ç–ª–∞–¥–∫—É –≤ PHPMailer
$mail->SMTPDebug = 2;
$mail->Debugoutput = 'html';
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ firewall:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞ 465/587
telnet smtp.yandex.com 465
```

3. **–î–ª—è Yandex –ø–æ—á—Ç—ã:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ
   - –í–∫–ª—é—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ—á—Ç–æ–≤—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**

```bash
tail -f /var/log/nginx/error.log
tail -f /var/log/php8.1-fpm.log
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### users
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
```sql
- id (INT, PK, AUTO_INCREMENT)
- login (VARCHAR, UNIQUE) - Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- password (VARCHAR) - –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
- name (VARCHAR) - –ò–º—è
- surname (VARCHAR) - –§–∞–º–∏–ª–∏—è
- auth_key (VARCHAR) - –ö–ª—é—á –¥–ª—è cookie –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- created_at (TIMESTAMP)
```

#### roles
–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```sql
- id (INT, PK)
- name (VARCHAR, UNIQUE) - admin, nko, user
- description (VARCHAR)
```

#### user_roles
–°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π
```sql
- id (INT, PK)
- user_id (INT, FK -> users)
- role_id (INT, FK -> roles)
```

#### cards
–ü—Ä–æ–µ–∫—Ç—ã/–∫–∞—Ä—Ç–æ—á–∫–∏
```sql
- id (INT, PK)
- type (VARCHAR) - –°–û–¶.–ü–†–û–ï–ö–¢, –≠–ö–û–õ–û–ì–ò–Ø, –ñ–ò–í–û–¢–ù–´–ï
- header (VARCHAR) - –ó–∞–≥–æ–ª–æ–≤–æ–∫
- location (VARCHAR) - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- main_text (TEXT) - –û–ø–∏—Å–∞–Ω–∏–µ
- current_participants (INT) - –¢–µ–∫—É—â–µ–µ –∫–æ–ª-–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- max_participants (INT) - –ú–∞–∫—Å–∏–º—É–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- date (VARCHAR) - –î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- created_by (INT, FK -> users)
- FULLTEXT INDEX (header, main_text, location)
```

#### card_participants
–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
```sql
- id (INT, PK)
- card_id (INT, FK -> cards)
- user_id (INT, FK -> users)
- joined_at (TIMESTAMP)
- UNIQUE (card_id, user_id)
```

#### nko_organizations
–ù–ö–û –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
```sql
- id (INT, PK)
- user_id (INT, FK -> users)
- name (VARCHAR) - –ù–∞–∑–≤–∞–Ω–∏–µ
- category (VARCHAR) - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
- description (TEXT) - –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- activities (TEXT) - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤
- status (ENUM) - pending, approved, rejected
- logo_path (VARCHAR) - –ü—É—Ç—å –∫ –ª–æ–≥–æ—Ç–∏–ø—É
```

#### rosatom_cities
–ì–æ—Ä–æ–¥–∞ –∏ –ù–ö–û –Ω–∞ –∫–∞—Ä—Ç–µ
```sql
- id (INT, PK)
- name (VARCHAR) - –ù–∞–∑–≤–∞–Ω–∏–µ
- region (VARCHAR) - –†–µ–≥–∏–æ–Ω
- latitude (DECIMAL) - –®–∏—Ä–æ—Ç–∞
- longitude (DECIMAL) - –î–æ–ª–≥–æ—Ç–∞
- object_type (ENUM) - city, nko
- nko_type (VARCHAR) - –¢–∏–ø –ù–ö–û (–µ—Å–ª–∏ object_type='nko')
- is_active (BOOLEAN) - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
```

#### password_resets
–¢–æ–∫–µ–Ω—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
```sql
- id (INT, PK)
- email (VARCHAR)
- token (VARCHAR, 64) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
- expires_at (DATETIME) - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- INDEX (email, token)
```

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### PHP-FPM

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `/etc/php/8.1/fpm/pool.d/www.conf`:

```ini
[www]
pm = dynamic
pm.max_children = 50
pm.start_servers = 5
pm.min_spare_servers = 5
pm.max_spare_servers = 35
pm.max_requests = 500
```

### MySQL Query Cache

```sql
-- –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 2;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤
SHOW INDEX FROM cards;
SHOW INDEX FROM rosatom_cities;
```

### Nginx –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```nginx
# Fastcgi cache
fastcgi_cache_path /var/cache/nginx levels=1:2 
keys_zone=microcache:10m max_size=1g inactive=1h;

location ~ \.php$ {
    fastcgi_cache microcache;
    fastcgi_cache_key $scheme$request_method$host$request_uri;
    fastcgi_cache_valid 200 60s;
}
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - Nginx: `/var/log/nginx/error.log`
   - PHP-FPM: `/var/log/php8.1-fpm.log`
   - MySQL: `/var/log/mysql/error.log`

2. **–í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏:**
   ```php
   // –í config.php
   define('DEBUG_MODE', true);
   
   // –í db.php
   error_reporting(E_ALL);
   ini_set('display_errors', 1);
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –∫–æ–Ω—Å–æ–ª—å (F12):**
   - Network tab –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
   - Console tab –¥–ª—è JavaScript –æ—à–∏–±–æ–∫

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PHP](https://www.php.net/docs.php)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MySQL](https://dev.mysql.com/doc/)
- [Yandex.Maps API](https://yandex.ru/dev/maps/jsapi/)
- [Nginx –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://nginx.org/ru/docs/)
- [PHPMailer GitHub](https://github.com/PHPMailer/PHPMailer)

---

<div align="center">

**Made with ‚ù§Ô∏è by Team 404: Sleep Not Found**

*–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º. [README.md](./README.md)*

</div>
